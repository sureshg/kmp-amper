repositories:
  - id: mavenLocal
    url: mavenLocal
    resolve: false
    publish: true

settings:
  jvm:
    release: 25
    storeParameterNames: true
    jdk:
      version: 25
      distributions: [ oracleOpenJdk, zulu ]

  kotlin:
    version: 2.3.0-RC2
    languageVersion: 2.3
    apiVersion: 2.3
    progressiveMode: true
    allWarningsAsErrors: false
    suppressWarnings: false
    verbose: false
    freeCompilerArgs:
      - -Wextra
      - -Xcontext-parameters
      - -Xexpect-actual-classes
      - -Xwhen-guards
      - -Xmulti-dollar-interpolation
      - -Xnon-local-break-continue
      - -Xnested-type-aliases
      - -Xreport-all-warnings
      - -Xreturn-value-checker=check
      - -Xcontext-sensitive-resolution
      - -Xannotation-default-target=param-property
      - -Xdata-flow-based-exhaustiveness
    # - -Xannotation-target-all
    # - -Xskip-prerelease-check
    # - -Xsuppress-warning=CAN_BE_VAL
    optIns:
      - kotlin.ExperimentalStdlibApi
      - kotlin.ExperimentalUnsignedTypes
      - kotlin.contracts.ExperimentalContracts
      - kotlin.io.encoding.ExperimentalEncodingApi
      - kotlin.time.ExperimentalTime
      - kotlinx.coroutines.ExperimentalCoroutinesApi
      - kotlinx.serialization.ExperimentalSerializationApi
      - kotlin.ExperimentalMultiplatform
      - kotlin.uuid.ExperimentalUuidApi
      - kotlin.concurrent.atomics.ExperimentalAtomicApi

    serialization:
      version: 1.9.0
      format: json

    ksp:
      version: 2.3.3

  publishing:
    enabled: true
    group: dev.suresh.amper
    version: 1.0.0-SNAPSHOT

settings@jvm:
  java:
    compileIncrementally: true
    freeCompilerArgs:
      - -Xlint:all
      - --add-modules=jdk.incubator.vector
    # - --enable-preview
    # annotationProcessing:
    #   processors:
    #     - $libs.google.auto.service
    #   processorOptions:
    #     - debug: "true"

  kotlin:
    freeCompilerArgs:
      - -Xno-param-assertions
      - -Xno-call-assertions
      - -Xno-receiver-assertions
      - -Xwhen-expressions=indy
      # - -Xjvm-enable-preview
      # - -Xjvm-expose-boxed
      # - -Xjdk-release=25
      # - -Xadd-modules=ALL-MODULE-PATH
      # - -Xmodule-path=
      # - -Xjavac-arguments="--add-exports java.base/sun.nio.ch=ALL-UNNAMED"
      # - -Xexplicit-api=strict

    ksp:
      processors:
        - $libs.ksp.auto.service

  junit: junit-5

settings@native:
  kotlin:
    debug: false
    optIns:
      - kotlinx.cinterop.ExperimentalForeignApi
      - kotlin.experimental.ExperimentalNativeApi

settings@linux:
  kotlin:
    linkerOptions: [
      "-Wl,--as-needed",
      "-Wl,-Bstatic",
      "-lz",
      "-Wl,-Bdynamic"
    ]

settings@web:
  kotlin:
    freeCompilerArgs:
      - -target=es2015
      - -source-map
      - -Xir-dce=true
      - -Xgenerate-dts
      - -Xes-long-as-bigint
      - -Xir-per-file
      - -Xwasm-use-new-exception-proposal
    # - -Xir-per-module
    optIns:
      - kotlin.js.ExperimentalJsExport
      - kotlin.js.ExperimentalWasmJsInterop

test-settings:
  kotlin:
    powerAssert:
      enabled: true
      functions:
        - kotlin.assert
        - kotlin.require
        - kotlin.test.assertTrue
        - kotlin.test.assertEquals
        - kotlin.test.assertNull

test-settings@jvm:
  jvm:
    test:
      freeJvmArgs:
        - --add-modules=jdk.incubator.vector
      # - --enable-preview